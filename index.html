<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>ZUNRDP | Authentication</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { background: #05070a; color: #e2e8f0; font-family: 'Inter', sans-serif; }
        .glass { background: rgba(17, 24, 39, 0.7); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.05); }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen">
    <div class="glass p-10 rounded-3xl w-full max-w-md shadow-2xl border-t-4 border-blue-500">
        <h1 class="text-4xl font-black text-center mb-2 italic text-blue-500">ZUNRDP</h1>
        <p class="text-center text-[10px] tracking-[0.3em] text-gray-500 mb-10 uppercase">Cloud Infrastructure</p>

        <div id="auth-form" class="space-y-4">
            <input type="text" id="user" placeholder="Tên đăng nhập" class="w-full p-4 bg-black/50 rounded-xl border border-white/10 outline-none focus:border-blue-500">
            <input type="password" id="pass" placeholder="Mật khẩu" class="w-full p-4 bg-black/50 rounded-xl border border-white/10 outline-none focus:border-blue-500">
            
            <button onclick="handleAuth('login')" class="w-full py-4 bg-blue-600 rounded-xl font-bold hover:bg-blue-700 transition">ĐĂNG NHẬP</button>
            <div class="flex items-center my-6"><div class="flex-1 h-px bg-white/10"></div><span class="px-4 text-xs text-gray-500">Hoặc</span><div class="flex-1 h-px bg-white/10"></div></div>
            <button onclick="handleAuth('reg')" class="w-full py-4 bg-transparent border border-white/10 rounded-xl font-bold hover:bg-white/5 transition">ĐĂNG KÝ TÀI KHOẢN</button>
        </div>
    </div>

    <script>
        const API = "https://zunrdp-default-rtdb.asia-southeast1.firebasedatabase.app";

        async function handleAuth(type) {
            const u = document.getElementById('user').value.trim().toLowerCase();
            const p = document.getElementById('pass').value.trim();
            if(!u || !p) return alert("Vui lòng nhập đủ!");

            if(type === 'login') {
                // Check Admin cứng
                if(u === 'zunrdp' && p === '26082007ngoc') {
                    localStorage.setItem('role', 'admin');
                    return window.location.href = 'admin.html';
                }
                // Check Member
                const res = await fetch(`${API}/users/${u}.json`).then(r => r.json());
                if(res && res.password === p) {
                    if(res.status === 'banned') return alert("Bạn đã bị BAN!");
                    localStorage.setItem('user', u);
                    window.location.href = 'member.html';
                } else alert("Sai tài khoản hoặc mật khẩu!");
            } else {
                // Đăng ký
                const check = await fetch(`${API}/users/${u}.json`).then(r => r.json());
                if(check) return alert("Tài khoản đã tồn tại!");
                await fetch(`${API}/users/${u}.json`, {
                    method: 'PUT',
                    body: JSON.stringify({ password: p, status: 'active', key: 'WAITING', limit: 1 })
                });
                alert("Đăng ký thành công! Hãy đợi Admin cấp Key.");
            }
        }
    </script>
</body>
</html>

